using System.Collections.Generic;


List<char[,]> levels = new List<char[,]>();

char[,] map1 =
{
   { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' },
{ '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
{ '█', '█', '█', ' ', '█', ' ', '█', '█', '█', '█', ' ', '█' },
{ '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█', ' ', ' ', '█' },
{ '█', ' ', '█', '█', '█', '█', '█', ' ', '█', '█', '█', '█' },
{ '█', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', '█' },
{ '█', ' ', '█', ' ', '█', '█', '█', ' ', '█', ' ', '█', '█' },
{ '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
{ '█', '█', '█', '█', '█', ' ', '█', '█', '█', '█', ' ', '█' },
{ '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', '█' },
{ '█', ' ', '█', '█', '█', '█', '█', ' ', '█', '█', ' ', 'E' },
{ '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' }
};
char[,] map2 = 
{
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', '█', '█', '█', '█', ' ', '█', ' ', '█', '█', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', ' ', '█', '█', '█', '█', '█', ' ', '█', '█', '█' },
    { '█', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█' },
    { '█', ' ', '█', '█', '█', '█', '█', ' ', '█', '█', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█', ' ', ' ', ' ', '█' },
    { '█', '█', '█', ' ', '█', ' ', '█', ' ', '█', ' ', '█', '█', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', '█', '█', '█', '█', '█', '█', '█', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 'E' },
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' }
};
char[,] map3 =
{
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', '█', '█', '█', '█', '█', '█', ' ', '█', ' ', '█', '█', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', '█' },
    { '█', ' ', '█', '█', '█', '█', '█', '█', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█' },
    { '█', ' ', '█', ' ', '█', '█', '█', '█', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', '█', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', ' ', '█', '█', '█', '█', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', '█', '█', '█', '█', '█', '█', ' ', '█', '█', '█', '█', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', '█', '█', '█', '█', '█', '█', ' ', '█', '█', '█', '█', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 'E' },
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' }
};
char[,] map4 =
{
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', '█', '█', ' ', '█', ' ', '█', ' ', '█' },
    { '█', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', '█' },
    { '█', ' ', '█', '█', '█', '█', '█', ' ', '█', ' ', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', '█', '█', ' ', '█', '█', '█', '█', '█', '█', '█', '█', '█', ' ', '█', '█', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', '█', '█', ' ', '█', '█', '█', '█', '█', ' ', '█', '█', '█', ' ', '█' },
    { '█', ' ', ' ', '█', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', '█', '█', ' ', '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', '█', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', ' ', '█', '█', '█', '█', '█', '█', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', ' ', '█', '█', '█', '█', '█', '█', '█', '█', ' ', '█', '█', '█', '█' },
    { '█', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', 'E' },
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' }
};
char[,] map5 =
{
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', '█', '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', '█', '█', '█', '█', '█', ' ', '█' },
    { '█', ' ', '█', ' ', ' ', ' ', '█', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█' },
    { '█', ' ', '█', ' ', '█', ' ', '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', '█', ' ', '█', ' ', ' ', ' ', '█', ' ', '█', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', ' ', '█', ' ', '█', '█', ' ', '█', ' ', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█', ' ', ' ', '█', ' ', '█', '█', '█' },
    { '█', '█', '█', '█', '█', ' ', '█', '█', '█', ' ', '█', ' ', ' ', ' ', '█', '█', ' ', '█', '█', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█', ' ', '█', ' ', ' ', ' ', ' ', '█', ' ', '█' },
    { '█', ' ', '█', '█', '█', '█', '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', '█', '█', '█', ' ', '█' },
    { '█', ' ', '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', '█', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█' },
    { '█', ' ', '█', ' ', '█', ' ', '█', '█', '█', '█', '█', '█', '█', ' ', '█', '█', '█', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', '█', ' ', '█' },
    { '█', '█', '█', ' ', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '█', ' ', '█', ' ', '█' },
    { '█', ' ', '█', '█', '█', '█', '█', ' ', '█', '█', '█', '█', ' ', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', ' ', ' ', ' ', '█', '█', '█', ' ', '█', ' ', '█' },
    { '█', ' ', ' ', ' ', '█', '█', '█', '█', '█', '█', '█', '█', ' ', ' ', ' ', ' ', ' ', '█', ' ', 'E' },
    { '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█', '█' }
};
levels.Add(map1);
levels.Add(map2);
levels.Add(map3);
levels.Add(map4);
levels.Add(map5);

int IntValidation()
{
    int result;
    while(!int.TryParse(Console.ReadLine(), out result))
    {   
        Console.WriteLine("Error! Type a number between 1 and 6.");
        Thread.Sleep(2300);
        Console.Clear();
    }
    return result;
}



void StartLevel(int level, int levelTime)
{

int X;
int Y;
int playerX = 1;
int playerY = 1;

DateTime start = DateTime.Now;

while(true) 
{   
    int secsPassed = (int)(DateTime.Now - start).TotalSeconds;
    int secsLeft = levelTime - secsPassed;
    if(secsLeft <= 0)
    {
        Thread.Sleep(1500);
        Console.Clear();
        Title("Game Over");
        Thread.Sleep(2500);
        break;
    }

    Console.Clear();

    Title($" TIME LEFT: {secsLeft}s");

    for(X = 0; X < levels[level].GetLength(0); X++)
    {
        for(Y = 0; Y < levels[level].GetLength(1); Y++)
        {
            if(X == playerY && Y == playerX)
        {
            Console.Write('P');
        } else
        {
            Console.Write(levels[level][X, Y]);
        }
        }
        
    Console.WriteLine();
    }

    if (Console.KeyAvailable)
    {
    ConsoleKeyInfo input = Console.ReadKey(true);
    ConsoleKey key = input.Key;
    if (key == ConsoleKey.UpArrow) if(levels[level][playerY -1, playerX] == ' ' || levels[level][playerY -1, playerX] == 'E') playerY--;
    if (key == ConsoleKey.DownArrow) if(levels[level][playerY +1, playerX] == ' ' || levels[level][playerY +1, playerX] == 'E') playerY++;
    if(key == ConsoleKey.LeftArrow) if(levels[level][playerY, playerX -1] == ' ' || levels[level][playerY, playerX -1] == 'E') playerX--;
    if(key == ConsoleKey.RightArrow) if(levels[level][playerY, playerX +1] == ' '|| levels[level][playerY, playerX +1]  =='E') playerX++;

    }
  
    Thread.Sleep(30);
    if(levels[level][playerY, playerX] == 'E')
    {   
        Thread.Sleep(1500);
        Console.Clear();
        Title("You win!");
        Thread.Sleep(2500);
        break;
    }
}
}

void Title(string title)
{
    int numerOfLetters = title.Length;
    string asterisks = string.Empty.PadLeft(numerOfLetters, '*');
    Console.WriteLine(asterisks);
    Console.WriteLine(title);
    Console.WriteLine(asterisks + "\n");
}

void Menu()
{
    bool gameMenu = true;
    while (gameMenu == true)
    {
        Console.Clear();
        Title("Console Labyrinth");
        Console.WriteLine("This game has 5 levels of difficulty, level 1 being the easiest. Please chose your challenge:\n");
        Console.WriteLine("- Level 1 -");
        Console.WriteLine("- Level 2 -");
        Console.WriteLine("- Level 3 -");
        Console.WriteLine("- Level 4 -");
        Console.WriteLine("- Level 5 -");
        Console.WriteLine("- Exit  6 -");
        int option = IntValidation();

        switch (option)
        {
            case 1: StartLevel(0, 9);
            break;
            case 2: StartLevel(1,13);
            break;
            case 3: StartLevel(2,15);
            break;
            case 4: StartLevel(3,16);
            break;
            case 5: StartLevel(4,16);
            break;
            case 6: Console.Clear();
            Console.WriteLine("Bye bye... :)");
            Thread.Sleep(2300);
            Console.Clear();
            gameMenu = false;
            break;
            default: Console.WriteLine("Error! Type a number between 1 and 6.");
            Thread.Sleep(2300);
            Console.Clear();
            break;
        }
    }
}

Menu();